# OpenPilot 安装器编辑器

## 项目概述

这是一个基于HTML5的Web应用程序，用于自定义OpenPilot二进制安装器文件。该工具允许用户修改安装器中的Git仓库地址、用户名、分支和安装信息，无需重新编译即可生成个性化的安装器。

## 主要功能

### 🔧 核心功能
- **文件上传支持**：支持拖拽或点击上传二进制安装器文件
- **智能文件识别**：自动检测NEOS（Android）和AGNOS（Ubuntu）两种安装器类型
- **字符串提取**：自动分析并提取当前安装器中的配置信息
- **参数自定义**：
  - Git主机地址（如github.com、自建Git服务器等）
  - 用户名/组织名
  - 分支名称
  - 安装提示信息
- **智能替换**：在二进制文件中精确定位并替换目标字符串
- **文件下载**：生成自定义安装器并自动下载

### 🛡️ 安全特性
- **长度限制**：根据文件类型动态设置字符串长度限制
- **智能截断**：当输入超长时进行智能截断，尽量保持单词完整
- **实时验证**：输入时实时显示字符计数和状态提示
- **调试模式**：提供详细的调试日志，便于问题排查

### 📊 用户界面
- **现代化设计**：采用渐变背景和毛玻璃效果
- **响应式布局**：适配不同屏幕尺寸
- **实时反馈**：输入框颜色变化和字符计数
- **拖拽上传**：支持文件拖拽上传

## 使用方法

### 步骤1：获取原始安装器
1. 点击页面底部的"📥 下载原始安装器"按钮
2. 或从官方渠道获取`installer_openpilot_neos`或`installer_openpilot_agnos`文件

### 步骤2：上传文件
1. 点击上传区域或直接拖拽文件到上传区域
2. 系统会自动识别文件类型并显示当前配置信息

### 步骤3：自定义配置
根据需要修改以下参数：

- **Git主机地址**：
  - 默认：`github.com`
  - 示例：`gitea.example.com:8080`
  - 限制：最多100字符，建议≤60字符

- **用户名**：
  - 默认：`commaai`
  - 示例：`your-username`
  - 限制：AGNOS最多55字符，NEOS最多200字符

- **分支名**：
  - 默认：NEOS为`master`，AGNOS为`release`
  - 示例：`custom-branch`
  - 限制：最多32字符，建议≤24字符

- **安装信息**：
  - 默认：`Installing openpilot`
  - 示例：`Installing custom build`
  - 限制：最多25字符，建议15-20字符

### 步骤4：生成安装器
1. 点击"🔧 生成自定义安装器"按钮
2. 系统会自动下载生成的自定义安装器文件
3. 文件名格式：`installer_openpilot_custom_{用户名}_{时间戳}`

## 技术特点

### 文件类型检测
- **NEOS检测**：通过`__android_log`、`/system/bin/linker64`等Android特征识别
- **AGNOS检测**：通过`libQt`、`/lib/ld-linux`等Ubuntu特征识别

### 字符串替换算法
- **字节级搜索**：直接在二进制数据中搜索目标字符串
- **空间管理**：智能计算可用空间，避免覆盖其他数据
- **类型适配**：针对NEOS和AGNOS采用不同的替换策略

### 调试功能
- **调试模式开关**：可开启详细日志记录
- **日志下载**：支持下载完整的调试日志文件
- **错误追踪**：详细记录每个操作步骤和结果

## 兼容性

- **支持的安装器**：
  - `installer_openpilot_neos`（Android系统）
  - `installer_openpilot_agnos`（Ubuntu系统）

- **浏览器要求**：
  - 现代浏览器（Chrome、Firefox、Safari、Edge）
  - 支持HTML5 File API
  - 支持ES6语法

## 注意事项

⚠️ **重要提醒**：
1. 仅支持修改文本字符串，不能修改二进制逻辑
2. 输入长度超限时会自动截断，可能影响功能
3. 建议在测试环境中验证自定义安装器
4. 保留原始安装器文件作为备份


## 开发信息

- **技术栈**：纯HTML5 + CSS3 + JavaScript
- **无依赖**：不需要外部库或框架
- **离线可用**：所有功能都在客户端实现
- **跨平台**：支持Windows、macOS、Linux

这个工具为OpenPilot开发者和用户提供了一个简单易用的方式来自定义安装器，无需复杂的编译环境即可快速生成个性化版本。
        
